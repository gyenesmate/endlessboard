import{b as Pe}from"./chunk-JGCTVKLB.js";import{a as le,b as me,c as ue,d as ge,e as u,f as de,g as ve,h as D}from"./chunk-JY2YBEA6.js";import{$ as Q,$a as re,Ab as l,C as f,Cb as se,Cc as we,Ga as _,Gc as m,Ka as W,Lb as ce,N as P,Q as b,Qa as h,R as $,Ra as A,U,Ua as V,V as I,X as J,Z as F,_ as i,bb as G,c as S,eb as oe,f as x,fa as X,ga as ee,gb as z,gc as pe,hb as p,ib as c,ja as te,jb as O,mb as ie,n as w,na as ne,nc as fe,ob as ae,oc as be,pb as K,pc as he,qc as Ce,u as Y,uc as Me,w as v,x as B}from"./chunk-H5PX2EZB.js";import{a as q}from"./chunk-576YX7J7.js";function Le(t,r){if(t&1){let e=ie();p(0,"li",9)(1,"a",14),l(2,"Builder"),c()(),p(3,"li",9)(4,"a",15),l(5,"Profile"),c()(),p(6,"li",9)(7,"a",16),ae("click",function(){X(e);let o=K();return ee(o.logoutUser())}),O(8,"i",17),l(9," Log Out "),c()()}}function Re(t,r){t&1&&(p(0,"li",9)(1,"a",18),l(2,"Login"),c()(),p(3,"li",9)(4,"a",19),l(5,"Register"),c()())}function Ne(t,r){if(t&1&&(p(0,"span",13),l(1),c()),t&2){let e=K();_(),se("User Name: ",e.getAuthToken(),"")}}var T=class t{constructor(r,e){this.authService=r;this.userManagment=e}isLoggedIn(){return!!this.authService.isLoggedIn()}logoutUser(){this.userManagment.logout()}getAuthToken(){return localStorage.getItem("authToken")}static \u0275fac=function(e){return new(e||t)(W(Ce),W(m))};static \u0275cmp=h({type:t,selectors:[["app-nav-bar"]],decls:20,vars:4,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","/main",1,"navbar-brand","mb-0","h1"],["type","button","data-bs-toggle","collapse","data-bs-target","#mainNavContent","aria-controls","mainNavContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","mainNavContent",1,"collapse","navbar-collapse"],[1,"w-100","d-lg-flex","align-items-center","justify-content-between"],[1,"d-flex","justify-content-center","flex-grow-1","order-2","order-lg-2"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active","routerLink","/main",1,"nav-link"],["routerLinkActive","active","routerLink","/route-search",1,"nav-link"],[1,"order-3","order-lg-3","d-flex","align-items-center","justify-content-lg-end","justify-content-center","mt-2","mt-lg-0",2,"min-width","180px"],[1,"navbar-text"],["routerLinkActive","active","routerLink","/route-builder",1,"nav-link"],["routerLinkActive","active","routerLink","/profile",1,"nav-link"],["routerLinkActive","active","routerLink","/logout",1,"nav-link","logout",3,"click"],[1,"fas","fa-sign-out-alt",2,"margin-right","6px"],["routerLinkActive","active","routerLink","/login",1,"nav-link"],["routerLinkActive","active","routerLink","/register",1,"nav-link"]],template:function(e,n){e&1&&(p(0,"nav",0)(1,"div",1)(2,"a",2),l(3,"EndlessBoard"),c(),p(4,"button",3),O(5,"span",4),c(),p(6,"div",5)(7,"div",6)(8,"div",7)(9,"ul",8)(10,"li",9)(11,"a",10),l(12,"Home"),c()(),p(13,"li",9)(14,"a",11),l(15,"Search"),c()(),V(16,Le,10,0)(17,Re,6,0),c()(),p(18,"div",12),V(19,Ne,2,1,"span",13),c()()()()()),e&2&&(_(9),oe("center-navbar-nav",!n.isLoggedIn()),_(7),z(n.isLoggedIn()?16:17),_(3),z(n.isLoggedIn()?19:-1))},dependencies:[D,de,ve,pe],styles:[".navbar[_ngcontent-%COMP%]{background:#f7f9fc!important;box-shadow:0 1.5px 16px #29468612}.navbar[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{max-width:1300px;margin:0 auto;padding:0 2.3rem;display:flex;align-items:center;gap:2rem}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#294686;font-weight:700;letter-spacing:.01em;font-size:1.33rem;padding-right:2rem;transition:color .17s}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]:focus{color:#1b2e57;text-decoration:none}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{flex-grow:1;display:flex!important;justify-content:center!important}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{align-items:center;gap:.8rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-right:.5rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#2d384b;font-size:1rem;font-weight:500;border-radius:7px;padding:.48em 1.03em;transition:background .17s,color .17s,box-shadow .15s;text-decoration:none}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus-visible{background:#d3e1fd;color:#294686!important;text-decoration:none}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.logout[_ngcontent-%COMP%]{color:#be2411;border:1.2px solid #be2411;background:#ffebeb}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.logout[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.logout.active[_ngcontent-%COMP%]{background:#be2411;color:#fff!important}.navbar[_ngcontent-%COMP%]   .navbar-text[_ngcontent-%COMP%]{margin-left:2rem;font-size:1.02rem;color:#294686;font-weight:600;background:#e7ebf7;border-radius:7px;padding:.42em 1em;letter-spacing:.01em;transition:background .15s,color .15s;display:inline-block;white-space:nowrap}.center-navbar-nav[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;width:100%;display:flex!important;justify-content:center!important}@media (max-width: 991.98px){.navbar-collapse[_ngcontent-%COMP%] > .w-100[_ngcontent-%COMP%]{flex-direction:column!important;align-items:stretch!important}.navbar-nav[_ngcontent-%COMP%]{flex-direction:column!important;align-items:center!important;width:100%}.navbar-text[_ngcontent-%COMP%]{justify-content:center;text-align:center;width:100%;margin:1rem 0 0;display:block}.center-navbar-nav[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important;width:100%;justify-content:center!important}}"]})};var H="Service workers are disabled or not supported by this browser",C=class{serviceWorker;worker;registration;events;constructor(r,e){if(this.serviceWorker=r,!r)this.worker=this.events=this.registration=new S(n=>n.error(new b(5601,!1)));else{let n=null,o=new x;this.worker=new S(d=>(n!==null&&d.next(n),o.subscribe(E=>d.next(E))));let s=()=>{let{controller:d}=r;d!==null&&(n=d,o.next(n))};r.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(P(()=>r.getRegistration()));let a=new x;this.events=a.asObservable();let g=d=>{let{data:E}=d;E?.type&&a.next(E)};r.addEventListener("message",g),e?.get(G,null,{optional:!0})?.onDestroy(()=>{r.removeEventListener("controllerchange",s),r.removeEventListener("message",g)})}}postMessage(r,e){return new Promise(n=>{this.worker.pipe(f(1)).subscribe(o=>{o.postMessage(q({action:r},e)),n()})})}postMessageWithOperation(r,e,n){let o=this.waitForOperationCompleted(n),s=this.postMessage(r,e);return Promise.all([s,o]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(r){let e;return typeof r=="string"?e=n=>n.type===r:e=n=>r.includes(n.type),this.events.pipe(B(e))}nextEventOfType(r){return this.eventsOfType(r).pipe(f(1))}waitForOperationCompleted(r){return new Promise((e,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(B(o=>o.nonce===r),f(1),w(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).subscribe({next:e,error:n})})}get isEnabled(){return!!this.serviceWorker}},ke=(()=>{class t{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new x;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=v,this.notificationClicks=v,this.subscription=v;return}this.messages=this.sw.eventsOfType("PUSH").pipe(w(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(w(o=>o.data)),this.pushManager=this.sw.registration.pipe(w(o=>o.pushManager));let n=this.pushManager.pipe(P(o=>o.getSubscription()));this.subscription=new S(o=>{let s=n.subscribe(o),a=this.subscriptionChanges.subscribe(o);return()=>{s.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(H));let n={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return n.applicationServerKey=s,new Promise((a,g)=>{this.pushManager.pipe(P(M=>M.subscribe(n)),f(1)).subscribe({next:M=>{this.subscriptionChanges.next(M),a(M)},error:g})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(H));let e=n=>{if(n===null)throw new b(5602,!1);return n.unsubscribe().then(o=>{if(!o)throw new b(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,o)=>{this.subscription.pipe(f(1),P(e)).subscribe({next:n,error:o})})}decodeBase64(e){return atob(e)}static \u0275fac=function(n){return new(n||t)(F(C))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),R=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=v,this.unrecoverable=v;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(H));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new b(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(n){return new(n||t)(F(C))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();var ye=new J("");function je(){let t=i(k);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let r=i(ye),e=i(ne),n=i(G);e.runOutsideAngular(()=>{let o=navigator.serviceWorker,s=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",s),n.onDestroy(()=>{o.removeEventListener("controllerchange",s)})}),e.runOutsideAngular(()=>{let o,{registrationStrategy:s}=t;if(typeof s=="function")o=new Promise(a=>s().subscribe(()=>a()));else{let[a,...g]=(s||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Promise.resolve();break;case"registerWithDelay":o=Oe(+g[0]||0);break;case"registerWhenStable":o=Promise.race([n.whenStable(),Oe(+g[0])]);break;default:throw new b(5600,!1)}}o.then(()=>navigator.serviceWorker.register(r,{scope:t.scope}).catch(a=>console.error($(5604,!1))))})}function Oe(t){return new Promise(r=>setTimeout(r,t))}function Be(t,r){return new C(t.enabled!==!1?navigator.serviceWorker:void 0,r)}var k=class{enabled;scope;registrationStrategy};function Ue(t,r={}){return Q([ke,R,{provide:ye,useValue:t},{provide:k,useValue:r},{provide:C,useFactory:Be,deps:[k,te]},re(je)])}var Ee=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[Ue(e,n)]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=A({type:t});static \u0275inj=I({providers:[ke,R]})}return t})();var y=class t{swUpdate=i(R);subscription;offlineCallback;onlineCallback;ngOnInit(){this.subscription=Y(3e3).subscribe(()=>{this.swUpdate.checkForUpdate().then(r=>{r&&(alert("New version is available!"),window.location.reload())})}),this.offlineCallback=()=>console.log("offline"),window.addEventListener("offline",this.offlineCallback),this.onlineCallback=()=>console.log("online"),window.addEventListener("online",this.onlineCallback)}ngOnDestroy(){this.subscription?.unsubscribe(),window.removeEventListener("offline",this.offlineCallback),window.removeEventListener("online",this.onlineCallback)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,n){e&1&&O(0,"app-nav-bar")(1,"router-outlet")},dependencies:[ge,T],encapsulation:2})};var Se={name:"RouteLikeDB",version:1,objectStoresMeta:[{store:"routeLikes",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"routeID",keypath:"routeID",options:{unique:!0}}]}]};var Z={production:!1,firebase:{apiKey:"AIzaSyAi22e5LIt7ATnnok1M1VCji8BHEZr47v4",authDomain:"endless-board-app.firebaseapp.com",projectId:"endless-board-app",storageBucket:"endless-board-app.firebasestorage.app",messagingSenderId:"522646402728",appId:"1:522646402728:web:5f2cf592fa9c6a9ccdb49d",measurementId:"G-6GFFCFNB9V"}};var N=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-main-page"]],decls:2,vars:0,template:function(e,n){e&1&&(p(0,"p"),l(1,"main-page works!"),c())},encapsulation:2})};var xe=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?(n.navigateByUrl("/main"),!1):!0};var Ie=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?(n.navigateByUrl("/main"),!1):!0};var Ae=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?!0:(n.navigateByUrl("/main"),!1)};var De=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?!0:(n.navigateByUrl("/main"),!1)};var Te=[{path:"main",component:N},{path:"profile",loadComponent:()=>import("./chunk-TEFXUT4K.js").then(t=>t.ProfilePageComponent),canActivate:[Ae]},{path:"route-builder",loadComponent:()=>import("./chunk-UGDXDAOG.js").then(t=>t.RouteBuilderPageComponent),canActivate:[De]},{path:"route-search",loadComponent:()=>import("./chunk-TEEMTWA2.js").then(t=>t.RouteSearchPageComponent)},{path:"login",loadComponent:()=>import("./chunk-RDQUUJ3O.js").then(t=>t.LoginPageComponent),canActivate:[Ie]},{path:"register",loadComponent:()=>import("./chunk-XR4RKYJJ.js").then(t=>t.RegisterPageComponent),canActivate:[xe]},{path:"**",redirectTo:"main"}];var j=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=A({type:t,bootstrap:[y]});static \u0275inj=I({providers:[fe(()=>be(Z.firebase)),Me(()=>we())],imports:[y,me,ue,Pe.forRoot(Se),D.forRoot(Te),he.initializeApp(Z.firebase),Ee.register("ngsw-worker.js",{enabled:!ce(),registrationStrategy:"registerWhenStable:30000"})]})};le().bootstrapModule(j).catch(t=>console.error(t));
