import{b as Oe}from"./chunk-JGCTVKLB.js";import{a as ge,b as de,c as fe,d as ve,e as u,f as L,g as be,h as C}from"./chunk-JY2YBEA6.js";import{$ as X,$a as oe,Ab as p,C as v,Cb as ce,Cc as _e,Ga as O,Gc as m,Ka as V,Lb as le,N as _,Q as b,Qa as h,R as J,Ra as D,U as F,Ua as G,V as A,X as Q,Z as W,_ as i,_b as pe,bb as z,bc as me,c as E,eb as ie,f as I,fa as ee,ga as te,gb as H,gc as ue,hb as l,ib as c,ja as ne,jb as k,mb as ae,n as P,na as re,nc as he,ob as se,oc as Ce,pb as K,pc as Me,qc as we,u as $,uc as Pe,w as f,x as U}from"./chunk-H5PX2EZB.js";import{a as Y}from"./chunk-576YX7J7.js";function je(t,r){if(t&1){let e=ae();l(0,"li",9)(1,"a",14),p(2,"Builder"),c()(),l(3,"li",9)(4,"a",15),p(5,"Profile"),c()(),l(6,"li",9)(7,"a",16),se("click",function(){ee(e);let o=K();return te(o.logoutUser())}),k(8,"i",17),p(9," Log Out "),c()()}}function Be(t,r){t&1&&(l(0,"li",9)(1,"a",18),p(2,"Login"),c()(),l(3,"li",9)(4,"a",19),p(5,"Register"),c()())}function Ue(t,r){if(t&1&&(l(0,"span",13),p(1),c()),t&2){let e=K();O(),ce("User Name: ",e.getAuthToken(),"")}}var R=class t{constructor(r,e){this.authService=r;this.userManagment=e}isLoggedIn(){return!!this.authService.isLoggedIn()}logoutUser(){this.userManagment.logout()}getAuthToken(){return localStorage.getItem("authToken")}static \u0275fac=function(e){return new(e||t)(V(we),V(m))};static \u0275cmp=h({type:t,selectors:[["app-nav-bar"]],decls:20,vars:4,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["routerLink","/main",1,"navbar-brand","mb-0","h1"],["type","button","data-bs-toggle","collapse","data-bs-target","#mainNavContent","aria-controls","mainNavContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","mainNavContent",1,"collapse","navbar-collapse"],[1,"w-100","d-lg-flex","align-items-center","justify-content-between"],[1,"d-flex","justify-content-center","flex-grow-1","order-2","order-lg-2"],[1,"navbar-nav","mb-2","mb-lg-0"],[1,"nav-item"],["routerLinkActive","active","routerLink","/main",1,"nav-link"],["routerLinkActive","active","routerLink","/route-search",1,"nav-link"],[1,"order-3","order-lg-3","d-flex","align-items-center","justify-content-lg-end","justify-content-center","mt-2","mt-lg-0",2,"min-width","180px"],[1,"navbar-text"],["routerLinkActive","active","routerLink","/route-builder",1,"nav-link"],["routerLinkActive","active","routerLink","/profile",1,"nav-link"],["routerLinkActive","active","routerLink","/logout",1,"nav-link","logout",3,"click"],[1,"fas","fa-sign-out-alt",2,"margin-right","6px"],["routerLinkActive","active","routerLink","/login",1,"nav-link"],["routerLinkActive","active","routerLink","/register",1,"nav-link"]],template:function(e,n){e&1&&(l(0,"nav",0)(1,"div",1)(2,"a",2),p(3,"EndlessBoard"),c(),l(4,"button",3),k(5,"span",4),c(),l(6,"div",5)(7,"div",6)(8,"div",7)(9,"ul",8)(10,"li",9)(11,"a",10),p(12,"Home"),c()(),l(13,"li",9)(14,"a",11),p(15,"Search"),c()(),G(16,je,10,0)(17,Be,6,0),c()(),l(18,"div",12),G(19,Ue,2,1,"span",13),c()()()()()),e&2&&(O(9),ie("center-navbar-nav",!n.isLoggedIn()),O(7),H(n.isLoggedIn()?16:17),O(3),H(n.isLoggedIn()?19:-1))},dependencies:[C,L,be,ue],styles:[".navbar[_ngcontent-%COMP%]{background:#f7f9fc!important;box-shadow:0 1.5px 16px #29468612}.navbar[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{max-width:1300px;margin:0 auto;padding:0 2.3rem;display:flex;align-items:center;gap:2rem}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#294686;font-weight:700;letter-spacing:.01em;font-size:1.33rem;padding-right:2rem;transition:color .17s}.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]:focus{color:#1b2e57;text-decoration:none}.navbar[_ngcontent-%COMP%]   .navbar-center[_ngcontent-%COMP%]{flex-grow:1;display:flex!important;justify-content:center!important}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]{align-items:center;gap:.8rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-right:.5rem}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#2d384b;font-size:1rem;font-weight:500;border-radius:7px;padding:.48em 1.03em;transition:background .17s,color .17s,box-shadow .15s;text-decoration:none}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus-visible{background:#d3e1fd;color:#294686!important;text-decoration:none}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.logout[_ngcontent-%COMP%]{color:#be2411;border:1.2px solid #be2411;background:#ffebeb}.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.logout[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.logout.active[_ngcontent-%COMP%]{background:#be2411;color:#fff!important}.navbar[_ngcontent-%COMP%]   .navbar-text[_ngcontent-%COMP%]{margin-left:2rem;font-size:1.02rem;color:#294686;font-weight:600;background:#e7ebf7;border-radius:7px;padding:.42em 1em;letter-spacing:.01em;transition:background .15s,color .15s;display:inline-block;white-space:nowrap}.center-navbar-nav[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;width:100%;display:flex!important;justify-content:center!important}@media (max-width: 991.98px){.navbar-collapse[_ngcontent-%COMP%] > .w-100[_ngcontent-%COMP%]{flex-direction:column!important;align-items:stretch!important}.navbar-nav[_ngcontent-%COMP%]{flex-direction:column!important;align-items:center!important;width:100%}.navbar-text[_ngcontent-%COMP%]{justify-content:center;text-align:center;width:100%;margin:1rem 0 0;display:block}.center-navbar-nav[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important;width:100%;justify-content:center!important}}"]})};var Z="Service workers are disabled or not supported by this browser",M=class{serviceWorker;worker;registration;events;constructor(r,e){if(this.serviceWorker=r,!r)this.worker=this.events=this.registration=new E(n=>n.error(new b(5601,!1)));else{let n=null,o=new I;this.worker=new E(d=>(n!==null&&d.next(n),o.subscribe(x=>d.next(x))));let s=()=>{let{controller:d}=r;d!==null&&(n=d,o.next(n))};r.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(_(()=>r.getRegistration()));let a=new I;this.events=a.asObservable();let g=d=>{let{data:x}=d;x?.type&&a.next(x)};r.addEventListener("message",g),e?.get(z,null,{optional:!0})?.onDestroy(()=>{r.removeEventListener("controllerchange",s),r.removeEventListener("message",g)})}}postMessage(r,e){return new Promise(n=>{this.worker.pipe(v(1)).subscribe(o=>{o.postMessage(Y({action:r},e)),n()})})}postMessageWithOperation(r,e,n){let o=this.waitForOperationCompleted(n),s=this.postMessage(r,e);return Promise.all([s,o]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(r){let e;return typeof r=="string"?e=n=>n.type===r:e=n=>r.includes(n.type),this.events.pipe(U(e))}nextEventOfType(r){return this.eventsOfType(r).pipe(v(1))}waitForOperationCompleted(r){return new Promise((e,n)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(U(o=>o.nonce===r),v(1),P(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).subscribe({next:e,error:n})})}get isEnabled(){return!!this.serviceWorker}},Se=(()=>{class t{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new I;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=f,this.notificationClicks=f,this.subscription=f;return}this.messages=this.sw.eventsOfType("PUSH").pipe(P(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(P(o=>o.data)),this.pushManager=this.sw.registration.pipe(P(o=>o.pushManager));let n=this.pushManager.pipe(_(o=>o.getSubscription()));this.subscription=new E(o=>{let s=n.subscribe(o),a=this.subscriptionChanges.subscribe(o);return()=>{s.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Z));let n={userVisibleOnly:!0},o=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return n.applicationServerKey=s,new Promise((a,g)=>{this.pushManager.pipe(_(w=>w.subscribe(n)),v(1)).subscribe({next:w=>{this.subscriptionChanges.next(w),a(w)},error:g})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Z));let e=n=>{if(n===null)throw new b(5602,!1);return n.unsubscribe().then(o=>{if(!o)throw new b(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((n,o)=>{this.subscription.pipe(v(1),_(e)).subscribe({next:n,error:o})})}decodeBase64(e){return atob(e)}static \u0275fac=function(n){return new(n||t)(W(M))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),N=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=f,this.unrecoverable=f;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Z));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new b(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(n){return new(n||t)(W(M))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})();var xe=new Q("");function Fe(){let t=i(y);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let r=i(xe),e=i(re),n=i(z);e.runOutsideAngular(()=>{let o=navigator.serviceWorker,s=()=>o.controller?.postMessage({action:"INITIALIZE"});o.addEventListener("controllerchange",s),n.onDestroy(()=>{o.removeEventListener("controllerchange",s)})}),e.runOutsideAngular(()=>{let o,{registrationStrategy:s}=t;if(typeof s=="function")o=new Promise(a=>s().subscribe(()=>a()));else{let[a,...g]=(s||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=Promise.resolve();break;case"registerWithDelay":o=ye(+g[0]||0);break;case"registerWhenStable":o=Promise.race([n.whenStable(),ye(+g[0])]);break;default:throw new b(5600,!1)}}o.then(()=>navigator.serviceWorker.register(r,{scope:t.scope}).catch(a=>console.error(J(5604,!1))))})}function ye(t){return new Promise(r=>setTimeout(r,t))}function We(t,r){return new M(t.enabled!==!1?navigator.serviceWorker:void 0,r)}var y=class{enabled;scope;registrationStrategy};function Ve(t,r={}){return X([Se,N,{provide:xe,useValue:t},{provide:y,useValue:r},{provide:M,useFactory:We,deps:[y,ne]},oe(Fe)])}var Ee=(()=>{class t{static register(e,n={}){return{ngModule:t,providers:[Ve(e,n)]}}static \u0275fac=function(n){return new(n||t)};static \u0275mod=D({type:t});static \u0275inj=A({providers:[Se,N]})}return t})();var S=class t{swUpdate=i(N);subscription;offlineCallback;onlineCallback;ngOnInit(){this.subscription=$(3e3).subscribe(()=>{this.swUpdate.checkForUpdate().then(r=>{r&&(alert("New version is available!"),window.location.reload())})}),this.offlineCallback=()=>console.log("offline"),window.addEventListener("offline",this.offlineCallback),this.onlineCallback=()=>console.log("online"),window.addEventListener("online",this.onlineCallback)}ngOnDestroy(){this.subscription?.unsubscribe(),window.removeEventListener("offline",this.offlineCallback),window.removeEventListener("online",this.onlineCallback)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,n){e&1&&k(0,"app-nav-bar")(1,"router-outlet")},dependencies:[ve,R],encapsulation:2})};var Ie={name:"RouteLikeDB",version:1,objectStoresMeta:[{store:"routeLikes",storeConfig:{keyPath:"id",autoIncrement:!0},storeSchema:[{name:"routeID",keypath:"routeID",options:{unique:!0}}]}]};var q={production:!1,firebase:{apiKey:"AIzaSyAi22e5LIt7ATnnok1M1VCji8BHEZr47v4",authDomain:"endless-board-app.firebaseapp.com",projectId:"endless-board-app",storageBucket:"endless-board-app.firebasestorage.app",messagingSenderId:"522646402728",appId:"1:522646402728:web:5f2cf592fa9c6a9ccdb49d",measurementId:"G-6GFFCFNB9V"}};var j=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=h({type:t,selectors:[["app-main-page"]],decls:6,vars:0,consts:[["routerLink","/route-search"]],template:function(e,n){e&1&&(l(0,"h1"),p(1,"Welcome to Climbing Route Builder"),c(),l(2,"p"),p(3,"Create and search your climbing routes with ease!"),c(),l(4,"a",0),p(5,"Start Searching"),c())},dependencies:[C,L],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-weight:600;letter-spacing:.05em;margin-top:2rem;margin-bottom:2.5rem;font-size:2.2rem;color:#2d384b}p[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#555b6e;margin-bottom:3rem}a[_ngcontent-%COMP%]{display:block;width:fit-content;margin:0 auto;padding:.75rem 1.5rem;background-color:#3f72af;color:#fff;text-decoration:none;border-radius:5px;font-weight:500;transition:background-color .3s ease}"]})};var Ae=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?(n.navigateByUrl("/main"),!1):!0};var De=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?(n.navigateByUrl("/main"),!1):!0};var Le=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?!0:(n.navigateByUrl("/main"),!1)};var Re=(t,r)=>{let e=i(m),n=i(u);return e.isLoggedIn()?!0:(n.navigateByUrl("/main"),!1)};var Te=[{path:"main",component:j},{path:"profile",loadComponent:()=>import("./chunk-TEFXUT4K.js").then(t=>t.ProfilePageComponent),canActivate:[Le]},{path:"route-builder",loadComponent:()=>import("./chunk-UGDXDAOG.js").then(t=>t.RouteBuilderPageComponent),canActivate:[Re]},{path:"route-search",loadComponent:()=>import("./chunk-TEEMTWA2.js").then(t=>t.RouteSearchPageComponent)},{path:"login",loadComponent:()=>import("./chunk-RDQUUJ3O.js").then(t=>t.LoginPageComponent),canActivate:[De]},{path:"register",loadComponent:()=>import("./chunk-XR4RKYJJ.js").then(t=>t.RegisterPageComponent),canActivate:[Ae]},{path:"**",redirectTo:"main"}];var B=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=D({type:t,bootstrap:[S]});static \u0275inj=A({providers:[he(()=>Ce(q.firebase)),Pe(()=>_e()),{provide:pe,useClass:me}],imports:[S,de,fe,Oe.forRoot(Ie),C.forRoot(Te),Me.initializeApp(q.firebase),Ee.register("ngsw-worker.js",{enabled:!le(),registrationStrategy:"registerWhenStable:30000"})]})};ge().bootstrapModule(B).catch(t=>console.error(t));
